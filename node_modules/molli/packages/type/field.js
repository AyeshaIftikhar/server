const SimpleSchema = require('simpl-schema').default
const Kind = require('../kind')
const Argument = require('./argument')
const Path = require('./path')

class Field {
  constructor(config) {
    const ConfigShape = new SimpleSchema({
      name: String,
      type: Object,
      'type.name': String,
      'type.format': {
        type: String,
        allowedValues: [
          'X', 'X!', '[X]','[X!]', '[X]!', '[X!]!'
        ]
      },
      arguments: {
        type: Array,
        optional: true,
        defaultValue: [],
      },
      'arguments.$': {
        type: Argument,
        blackbox: true,
      },
      isUnique: {
        type: Boolean,
        optional: true,
      }
    })
    ConfigShape.validate(config)
    Object.assign(
      this,
      { kind: Kind.TYPE_FIELD },
      ConfigShape.clean(config)
    )
  }
}

module.exports = Field
